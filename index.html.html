<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Spin & Win â€“ Timeless Beauty</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(to bottom, #fff0f6, #ffffff);
    color: #444;
    text-align: center;
    overflow-x: hidden;
    -webkit-tap-highlight-color: transparent;
  }

  header {
    padding: 18px;
    background: linear-gradient(135deg, #ffd6e8, #ffeaf3);
    font-size: 22px;
    font-weight: 600;
    color: #c94c84;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  }

  .main-container {
    padding: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .user-info-section {
    background: #fff;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(242,163,194,0.2);
    margin: 20px 15px 0;
    max-width: 320px;
    width: 90%;
  }

  .user-info-section h4 {
    margin: 0 0 15px;
    color: #c94c84;
    font-size: 16px;
  }

  .user-info-section input {
    width: 100%;
    padding: 12px;
    margin-bottom: 10px;
    border: 1px solid #ffd6e8;
    border-radius: 10px;
    font-family: inherit;
    box-sizing: border-box;
    outline: none;
  }

  .user-info-section input:focus {
    border-color: #e16b9f;
  }

  .wheel-wrapper {
    position: relative;
    width: 320px;
    height: 320px;
    margin: 40px auto 10px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* Arrow Pointer */
  .wheel-wrapper::before {
    content: 'â–¼';
    position: absolute;
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    color: #c94c84;
    font-size: 30px;
    z-index: 40;
  }

  /* LOGO CENTERED FIX */
  .logo-overlay {
    position: absolute;
    width: 80px;
    height: 80px;
    background: #fff;
    border-radius: 50%;
    z-index: 35;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    border: 3px solid #f2a3c2;
    overflow: hidden;
    pointer-events: none;
  }

  .logo-overlay img {
    width: 85%;
    height: 85%;
    object-fit: contain;
  }

  #wheelCanvas {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 8px solid #f2a3c2;
    box-shadow: 0 15px 30px rgba(242,163,194,0.4);
    transition: transform 4s cubic-bezier(.17, .67, .23, .99);
  }

  #spinBtn {
    margin-top: 30px;
    padding: 15px 50px;
    font-size: 18px;
    border: none;
    border-radius: 40px;
    background: linear-gradient(135deg, #f2a3c2, #e16b9f);
    color: #fff;
    font-weight: 600;
    box-shadow: 0 8px 20px rgba(225,107,159,0.4);
    cursor: pointer;
    transition: all 0.2s ease;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  #spinBtn:disabled { 
    background: #dcdcdc; 
    box-shadow: none; 
    color: #999; 
    cursor: not-allowed;
  }

  #result {
    margin-top: 25px;
    font-size: 19px;
    font-weight: 600;
    color: #c94c84;
    min-height: 60px;
    padding: 0 15px;
    line-height: 1.4;
  }

  .rules-card {
    background: #fff;
    margin: 20px 15px 10px;
    padding: 24px;
    border-radius: 25px;
    box-shadow: 0 12px 30px rgba(243,166,200,0.25);
    text-align: left;
    max-width: 350px;
  }

  .rules-card h3 { text-align: center; color: #c94c84; margin-top: 0; }
  .rule { display: flex; margin-bottom: 12px; }
  .rule-dot {
    width: 8px; height: 8px; background: #f2a3c2; border-radius: 50%;
    margin-top: 6px; margin-right: 12px; flex-shrink: 0;
  }
  .rule-text { font-size: 14px; color: #555; }
  .rule-text span { display: block; font-size: 12px; color: #999; }
  .note { text-align: center; margin-top: 15px; font-size: 13px; color: #b86b91; font-style: italic; }

  .insta-follow-box {
    margin: 15px 15px 40px;
    background: #ffffff;
    padding: 12px 20px;
    border-radius: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    box-shadow: 0 8px 20px rgba(225, 107, 159, 0.15);
    border: 1px solid #ffe1ee;
    max-width: 320px;
    text-decoration: none;
  }

  .insta-follow-box img { width: 24px; height: 24px; }
  .insta-follow-box span { color: #c94c84; font-weight: 600; font-size: 14px; }
</style>
</head>

<body>

<header>ðŸŽ€ Timeless Beauty â€“ Spin & Win</header>

<div class="main-container">

  <div class="user-info-section" id="formSection">
    <h4>Fill details to Unlock Spin ðŸŽ€</h4>
    <input type="text" id="userName" placeholder="Enter Your Name" oninput="validateForm()">
    <input type="tel" id="userPhone" placeholder="Mobile Number" maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, ''); validateForm()">
  </div>

  <div class="wheel-wrapper">
    <canvas id="wheelCanvas" width="500" height="500"></canvas>
    <div class="logo-overlay">
      <img src="LOGO.jpeg" alt="Logo">
    </div>
  </div>

  <button id="spinBtn" onclick="spin()" disabled>SPIN NOW</button>

  <div id="result"></div>

  <div class="rules-card">
    <h3>Spin & Win Rules</h3>
    <div class="rule">
      <div class="rule-dot"></div>
      <div class="rule-text">Free spin per client <span>(Service above â‚¹300)</span></div>
    </div>
    <div class="rule">
      <div class="rule-dot"></div>
      <div class="rule-text">Free service valid on next visit <span>Within 1 month</span></div>
    </div>
    <div class="rule">
      <div class="rule-dot"></div>
      <div class="rule-text">Free service not valid with other offers</div>
    </div>
    <div class="rule">
      <div class="rule-dot"></div>
      <div class="rule-text">Spin wheel valid only after a paid service</div>
    </div>
    <div class="note">A little luck. A little luxury.</div>
  </div>

  <a href="https://www.instagram.com/__.timelessbeauty?igsh=ZTI1OGtycGU1eTls" target="_blank" class="insta-follow-box">
    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram">
    <span>Follow us @__.timelessbeauty</span>
  </a>
</div>

<audio id="tadaSound" src="sound.mp3"></audio>

<script>
let spun = false;
const prizes = [
  "Head Massage\n(10 min)",
  "Mini Facial\nMassage",
  "Threading\n(F.head/U.lip)",
  "Foot Massage\n(10 min)",
  "Hot Oil\nApplication",
  "Skincare\nGift",
  "Lucky\nSpin"
];

const colors = ['#ffe1ee', '#ffc6dc', '#ffe1ee', '#ffc6dc', '#ffe1ee', '#ffc6dc', '#ffe1ee'];
const canvas = document.getElementById('wheelCanvas');
const ctx = canvas.getContext('2d');

function drawWheel() {
  const arc = (2 * Math.PI) / prizes.length;
  ctx.clearRect(0,0,500,500);
  
  prizes.forEach((prize, i) => {
    const angle = i * arc;
    ctx.beginPath();
    ctx.fillStyle = colors[i];
    ctx.moveTo(250, 250);
    ctx.arc(250, 250, 250, angle, angle + arc);
    ctx.lineTo(250, 250);
    ctx.fill();
    ctx.strokeStyle = '#f2a3c2';
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.save();
    ctx.translate(250, 250);
    ctx.rotate(angle + arc / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#c94c84";
    ctx.font = "bold 22px Poppins";
    
    const lines = prize.split('\n');
    lines.forEach((line, index) => {
      ctx.fillText(line, 230, (index * 25) - ((lines.length-1)*12));
    });
    ctx.restore();
  });
}

drawWheel();

function validateForm() {
    const name = document.getElementById("userName").value.trim();
    const phone = document.getElementById("userPhone").value.trim();
    const btn = document.getElementById("spinBtn");
    
    if(name !== "" && phone.length === 10 && !spun) {
        btn.disabled = false;
    } else {
        btn.disabled = true;
    }
}

function spin(){
  if(spun) return;
  spun = true;

  const userName = document.getElementById("userName").value;
  const userPhone = document.getElementById("userPhone").value;
  const btn = document.getElementById("spinBtn");
  const tada = document.getElementById("tadaSound");
  const formInputs = document.querySelectorAll("#formSection input");

  formInputs.forEach(input => input.disabled = true);
  btn.disabled = true;

  const randomIdx = Math.floor(Math.random() * prizes.length);
  const arcDeg = 360 / prizes.length;
  
  const totalRotation = 3600 + (360 - (randomIdx * arcDeg) - (arcDeg/2)) - 90;

  canvas.style.transform = "rotate(" + totalRotation + "deg)";

  setTimeout(() => {
    let prize = prizes[randomIdx].replace('\n', ' ');
    document.getElementById("result").innerHTML = "ðŸŽ‰ Congratulations!<br><b>" + (prize === "Lucky Spin" ? "Lucky Spin â€“ Choose Any One Free Service" : prize) + "</b>";
    
    try { tada.play(); } catch(e) {}
    
    confetti({
      particleCount: 150,
      spread: 70,
      origin: { y: 0.6 },
      colors: ['#f2a3c2', '#e16b9f', '#ffffff', '#ffd6e8']
    });

    fetch('https://script.google.com/macros/s/AKfycbyeO2-JEiaz85DTNRUsLljfiU-6y_RhGDhaB7iYlDvcjBhMT32rLpLLH5cLX68pxUf6/exec', {
      method: 'POST',
      mode: 'no-cors',
      body: JSON.stringify({ name: userName, phone: userPhone, prize: prize })
    });

  }, 4100);
}
</script>

</body>
</html>